!function n(r,i,a){function o(t,e){if(!i[t]){if(!r[t]){var s="function"==typeof require&&require;if(!e&&s)return s(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}s=i[t]={exports:{}},r[t][0].call(s.exports,function(e){return o(r[t][1][e]||e)},s,s.exports,n,r,i,a)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)o(a[e]);return o}({1:[function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=(Object.defineProperty(s,"__esModule",{value:!0}),n(e("./modules/Utils"))),i=n(e("./modules/Queue")),n={event:new(n(e("./modules/Events")).default),queue:i.default,utils:r.default};s.default=n,window.seTools=n},{"./modules/Events":4,"./modules/Queue":5,"./modules/Utils":6}],2:[function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});const r=n(e("./Utils"));s.default=class{constructor(e){this.badges=e.data.badges,this.badgeInfo=e.data.tags["badge-info"]||"",this.channel=e.data.channel,this.customRewardId=e.data.tags["custom-reward-id"]||null,this.highlighted="highlighted-message"===e.data.tags["msg-id"],this.emotes=e.data.emotes,this.msgId=e.data.msgId,this.userId=e.data.userId,this.username=e.data.displayName,this.raw=e,this.renderedText=e.renderedText,this.text=r.default.trimSpaces(e.data.text),this.roles=this.getRoles(),this.stats=this.getStats(),this.time=new Date(e.data.time)}getWordList(){return r.default.createList(this.text," ")}getRoles(){var e,t={staff:!1,broadcaster:!1,moderator:!1,vip:!1,subscriber:!1};for(e of this.badges)switch(e.type){case"broadcaster":t.broadcaster=!0;break;case"moderator":t.moderator=!0;break;case"vip":t.vip=!0;break;case"subscriber":t.subscriber=!0;break;case"staff":t.staff=!0}return t}getStats(){var e=this.text.length,t={};return t.wordCount=this.getWordList().length,t.emoteCount=this.emotes.length,t.emotePercentage=r.default.getPercentageOf(t.emoteCount,t.wordCount),t.capsCount=(this.text.match(/[A-Z]/g)||[]).length,t.capsPercentage=r.default.getPercentageOf(t.capsCount,e),t.specialCharsCount=(this.text.match(/[^a-zA-Z0-9\s]/g)||[]).length,t.specialCharsPercentage=r.default.getPercentageOf(t.specialCharsCount,e),t}getDisplayColor(){return r.default.isset(this.raw.data.displayColor)?this.raw.data.displayColor:r.default.getRandomHexColor()}hasRole(e){switch(e){case"broadcaster":case"streamer":return!0===this.roles.broadcaster;case"moderator":case"mod":return!0===this.roles.moderator;case"vip":return!0===this.roles.vip;case"subscriber":case"sub":return!0===this.roles.subscriber;case"staff":return!0===this.roles.staff;default:return!1}}isBroadcaster(){return!0===this.roles.broadcaster}isModerator(){return!0===this.roles.moderator}isVIP(){return!0===this.roles.vip}isSubscriber(){return!0===this.roles.subscriber}isStaff(){return!0===this.roles.staff}hasPrimeBadge(){return this.badges.includes("premium")}hasTurboBadge(){return this.badges.includes("turbo")}getTierBadge(){var e=r.default.matchRegexGroups(this.raw.data.tags.badges,/subscriber\/(?<tier>[2|3]0)?[0-9]+/i);return e.tier?"20"===e.tier?2:"30"===e.tier?3:1:0}getMonthsSubscribed(){var e=r.default.matchRegexGroups(this.badgeInfo,/subscriber\/(?<months>[1-9][0-9]*)/i);return null!=e&&e.months?parseInt(e.months):0}getBitsBadge(){var e=r.default.matchRegexGroups(this.raw.data.tags.badges,/bits\/(?<bits>[1-9][0-9]*)/i);return null!=e&&e.bits?parseInt(e.bits):0}getGiftsBadge(){var e=r.default.matchRegexGroups(this.raw.data.tags.badges,/sub-gifter\/(?<gifts>[1-9][0-9]*)/i);return null!=e&&e.gifts?parseInt(e.gifts):0}isAction(){return!0===this.raw.data.isAction}isCustomReward(){return r.default.isset(this.customRewardId)}isHighlight(){return this.highlighted}isCommand(e=""){e=e.startsWith("!")?e:"!"+e;return this.text.startsWith(e)}getCommand(e=!1){var t;return this.isCommand()&&(t=r.default.matchRegexGroups(this.text,/^!(?<cmd>\w+)\s?\@?(?<args>[\w\s?]*)/i))?e?{command:t.cmd,args:r.default.createList(t.args," ",!0)}:t.cmd:null}contains(e,t=!1){return r.default.containsText(this.text,e,t)}containsRegex(e){return r.default.matchesRegex(this.text,e)}usernameOnList(e){var t;if(Array.isArray(e)&&0<e.length)for(var s of e)if((null==(t=s.toLocaleLowerCase)?void 0:t.call(s))===this.username.toLocaleLowerCase())return!0;return!1}hasUsername(e){var t;return this.username.toLocaleLowerCase()===(null==(t=e.toLocaleLowerCase)?void 0:t.call(e))}hasUserId(e){return this.userId===String(e)}usernameContains(e,t=!1){return r.default.containsText(this.username,e,t)}usernameContainsRegex(e){return r.default.matchesRegex(this.username,e)}}},{"./Utils":6}],3:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.events=void 0,s.events=[{name:"Subscriber",listener:"subscriber-latest"},{name:"Resub",listener:"subscriber-latest"},{name:"SubGift",listener:"subscriber-latest"},{name:"CommunityGift",listener:"subscriber-latest"},{name:"SubBomb",listener:"subscriber-latest"},{name:"SubBombComplete",listener:"subscriber-latest"},{name:"Tip",listener:"tip-latest"},{name:"Cheer",listener:"cheer-latest"},{name:"Host",listener:"host-latest"},{name:"Raid",listener:"raid-latest"},{name:"Follow",listener:"follower-latest"},{name:"Message",listener:"message"},{name:"DeleteMessage",listener:"delete-message"},{name:"DeleteMessages",listener:"delete-messages"},{name:"EventSkip",listener:"event:skip"},{name:"BotCounter",listener:"bot:counter"},{name:"WidgetButton",listener:"event:test"},{name:"KVStoreUpdate",listener:"kvstore:update"},{name:"ToggleSound",listener:"alertService:toggleSound"}]},{}],4:[function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});const r=n(e("./ChatMessage")),i=e("./EventList"),a=n(e("./Utils"));s.default=class{constructor(){this.skippable=["bot:counter","event:test","event:skip","message","kvstore:update","alertService:toggleSound"],this.giftCollection={},this.expectedEventListeners=[],this.expectedEventNames=[],this.expectsOnWidgetLoad=a.default.funcExists("onWidgetLoad"),this.expectsOnSessionUpdate=a.default.funcExists("onSessionUpdate"),this.useSenderCorrection=!0,this.preflightEventListeners(),this.registerOnWidgetLoad(),this.registerOnSessionUpdate(),this.registerOnEventReceived()}disableSenderCorrection(){this.useSenderCorrection=!1}isSkippable(e){return this.skippable.includes(e)}preflightEventListeners(){for(var e of i.events)a.default.funcExists("on"+e.name)&&(this.expectsEventListener(e.listener)||this.expectedEventListeners.push(e.listener),this.expectedEventNames.push(e.name))}registerOnWidgetLoad(){this.expectsOnWidgetLoad&&window.addEventListener("onWidgetLoad",this.onWidgetLoadHandler.bind(this))}unregisterOnWidgetLoad(){window.removeEventListener("onWidgetLoad",this.onWidgetLoadHandler)}registerOnSessionUpdate(){this.expectsOnSessionUpdate&&window.addEventListener("onSessionUpdate",this.onSessionUpdateHandler.bind(this))}unregisterOnSessionUpdate(){window.removeEventListener("onSessionUpdate",this.onSessionUpdateHandler)}registerOnEventReceived(){this.expectsEvents()&&window.addEventListener("onEventReceived",this.onEventReceivedHandler.bind(this))}unregisterOnEventReceived(){window.removeEventListener("onEventReceived",this.onEventReceivedHandler)}expectsEventListener(e){return this.expectedEventListeners.includes(e)}expectsEvents(){return 0<this.expectedEventNames.length}expectsEventName(e){return this.expectedEventNames.includes(e)}onWidgetLoadHandler(e){a.default.callFunc("onWidgetLoad",e)}onSessionUpdateHandler(e){a.default.callFunc("onSessionUpdate",e)}onSubscriberHandler(e){a.default.callFunc("onSubscriber",e)}onResubHandler(e){a.default.callFunc("onResub",e)}onSubGiftHandler(e){a.default.callFunc("onSubGift",e)}onCommunityGiftHandler(e){a.default.callFunc("onCommunityGift",e)}onSubBombHandler(e){a.default.callFunc("onSubBomb",e)}onSubBombCompleteHandler(e,t){a.default.callFunc("onSubBombComplete",e,t)}onTipHandler(e){a.default.callFunc("onTip",e)}onCheerHandler(e){a.default.callFunc("onCheer",e)}onHostHandler(e){a.default.callFunc("onHost",e)}onRaidHandler(e){a.default.callFunc("onRaid",e)}onFollowHandler(e){a.default.callFunc("onFollow",e)}onMessageHandler(e){e="twitch"===e.service.toLowerCase()?new r.default(e):e;a.default.callFunc("onMessage",e)}onDeleteMessageHandler(e){a.default.callFunc("onDeleteMessage",e)}onDeleteMessagesHandler(e){a.default.callFunc("onDeleteMessages",e)}onEventSkipHandler(){a.default.callFunc("onEventSkip")}onBotCounterHandler(e){a.default.callFunc("onBotCounter",e)}onWidgetButtonHandler(e){a.default.callFunc("onWidgetButton",e)}onKVStoreUpdateHandler(e){a.default.callFunc("onKVStoreUpdate",e)}onToggleSoundHandler(e){a.default.callFunc("onToggleSound",e)}onEventReceivedHandler(e){var t,s,n=null==(n=null==e?void 0:e.detail)?void 0:n.listener,e=null==(e=null==e?void 0:e.detail)?void 0:e.event;this.expectsEventName("Message")&&"message"===n?this.onMessageHandler(e):this.expectsEventName("DeleteMessage")&&"delete-message"===n?this.onDeleteMessageHandler(e):this.expectsEventName("DeleteMessages")&&"delete-messages"===n?this.onDeleteMessagesHandler(e):"subscriber-latest"===n?(!this.useSenderCorrection||!e.isTest||e.gifted&&e.isCommunityGift||e.bulkGifted||(e.sender=void 0),this.expectsEventName("Subscriber")&&!e.gifted&&1===e.amount&&void 0===e.sender?this.onSubscriberHandler(e):this.expectsEventName("SubGift")&&e.gifted&&!e.isCommunityGift?this.onSubGiftHandler(e):this.expectsEventName("Resub")&&1<e.amount&&void 0===e.sender?this.onResubHandler(e):e.bulkGifted?(this.expectsEventName("SubBombComplete")&&(s=null==(s=null==e?void 0:e.sender)?void 0:s.toLowerCase())&&void 0===this.giftCollection[s]&&(this.giftCollection[s]={amount:e.amount,recipients:[]}),this.expectsEventName("SubBomb")&&this.onSubBombHandler(e)):e.gifted&&e.isCommunityGift&&(this.expectsEventName("CommunityGift")&&this.onCommunityGiftHandler(e),this.expectsEventName("SubBombComplete"))&&(s=null==(s=null==e?void 0:e.sender)?void 0:s.toLowerCase())&&void 0!==this.giftCollection[s]&&(this.giftCollection[s].recipients.push(e.name),this.giftCollection[s].amount===(null==(t=this.giftCollection[s].recipients)?void 0:t.length))&&(e.amount=this.giftCollection[s].amount,this.onSubBombCompleteHandler(e,this.giftCollection[s].recipients),delete this.giftCollection[s])):this.expectsEventName("Tip")&&"tip-latest"===n?this.onTipHandler(e):this.expectsEventName("Cheer")&&"cheer-latest"===n?this.onCheerHandler(e):this.expectsEventName("Host")&&"host-latest"===n?this.onHostHandler(e):this.expectsEventName("Raid")&&"raid-latest"===n?this.onRaidHandler(e):this.expectsEventName("Follow")&&"follower-latest"===n?this.onFollowHandler(e):this.expectsEventName("BotCounter")&&"bot:counter"===n?this.onBotCounterHandler(e):this.expectsEventName("EventSkip")&&"event:skip"===n?this.onEventSkipHandler():this.expectsEventName("WidgetButton")&&"event:test"===n&&"widget-button"===e.listener?this.onWidgetButtonHandler(e):this.expectsEventName("KVStoreUpdate")&&"kvstore:update"===n?this.onKVStoreUpdateHandler(e.data):this.expectsEventName("ToggleSound")&&"alertService:toggleSound"===n&&this.onToggleSoundHandler(e)}}},{"./ChatMessage":2,"./EventList":3,"./Utils":6}],5:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.default=class{constructor(){this.queue=[],this.inUse=!1}get length(){return this.queue.length}get isEmpty(){return 0===this.queue.length}add(e){this.queue.push(e)}remove(e,t=1){0<=(e=e<0?this.queue.length+e:e)&&e<=this.queue.length-1&&this.queue.splice(e,t)}removeFirst(){this.remove(0)}removeLast(){this.remove(-1)}get(e){return 0<=e&&e<=this.queue.length-1?this.queue[e]:e<0&&Math.abs(e)<=this.queue.length?this.queue[this.queue.length+e]:null}get first(){return this.get(0)}get last(){return this.get(-1)}processFirst(n,r=0){return new Promise((e,t)=>{var s=this.first;null===s||this.inUse?e():(this.inUse=!0,n(s).then(()=>{setTimeout(()=>{this.removeFirst(),this.inUse=!1,e()},r)}).catch(t))})}processAll(r,i=0){return new Promise((t,s)=>{const n=()=>{var e=this.first;null===e||this.inUse?t():(this.inUse=!0,r(e).then(()=>{this.removeFirst(),this.inUse=!1,this.isEmpty?t():setTimeout(n,i)}).catch(e=>{this.inUse=!1,s(e)}))};n()})}}},{}],6:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});class r{}(s.default=r).isset=(e,t=!0)=>t?null!=e&&""!==e:null!=e,r.allset=(...e)=>{for(var t of e)if(!r.isset(t))return!1;return!0},r.resolves=(e,t)=>{var s;for(s of e.split(".")){if(void 0===t[s])return!1;t=t[s]}return!0},r.funcExists=e=>void 0!==window[e],r.callFunc=(e,...t)=>{r.funcExists(e)&&window[e](...t)},r.isString=e=>"string"==typeof e,r.trimSpaces=e=>r.isset(e)?r.isString(e)?e.replace(/\s+/g," ").trim():String(e):"",r.createList=(e,t=",",s=!1)=>{return r.isString(e)?(e=e.split(t).map(e=>r.trimSpaces(e)),s?e.filter(e=>""!==e):e):[]},r.containsText=(e,t,s=!1)=>r.isString(e)&&r.isString(t)?!!r.allset(e,t)&&(s&&e.includes(t)||e.toLocaleLowerCase().includes(null==t?void 0:t.toLocaleLowerCase())):null,r.formatCurrency=(e,t,s)=>{var n=r.isWholeNumber(e)?0:2;return e.toLocaleString(s,{style:"currency",minimumFractionDigits:n,currency:t})},r.matchesRegex=(e,t)=>!!r.allset(e,t)&&t.test(e),r.matchRegexGroups=(e,t)=>{t=t.exec(e);return null!=(e=null==t?void 0:t.groups)?e:null},r.divisibleBy=(e,t)=>0!==t&&e%t==0,r.isWholeNumber=e=>r.divisibleBy(e,1),r.nextIterator=(e,t,s=1)=>Math.abs(e)>=Math.abs(t)?0:e+s,r.formatTimerValue=e=>String(e).padStart(2,"0"),r.getRandomNumber=(e,t)=>{var s=Math.min(e,t),e=Math.max(e,t);return Math.floor(Math.random()*(e-s+1))+s},r.getRandomDecimal=(e,t,s=2)=>{return r.getRandomNumber(e*Math.pow(10,s),t*Math.pow(10,s))/Math.pow(10,s)},r.getPercentageOf=(e,t)=>0<e&&0<t?e/t*100:0,r.getRandomRGBObject=()=>{return{r:r.getRandomNumber(0,255),g:r.getRandomNumber(0,255),b:r.getRandomNumber(0,255)}},r.getRandomHexColor=()=>{var{r:e,g:t,b:s}=r.getRandomRGBObject();return"#"+e.toString(16)+t.toString(16)+s.toString(16)},r.getRandomRGBColor=()=>{var{r:e,g:t,b:s}=r.getRandomRGBObject();return`rgb(${e}, ${t}, ${s})`},r.getRandomRGBAColor=e=>{var e=0<=e&&e<=1?e:1,{r:t,g:s,b:n}=r.getRandomRGBObject();return`rgb(${t}, ${s}, ${n}, ${e})`},r.isChrome=()=>r.matchesRegex(window.navigator.userAgent,/chrom(e|ium)/i),r.getChromeVersion=(e=!1)=>{var t=r.matchRegexGroups(window.navigator.userAgent,/chrom(e|ium)\/(?<version>[0-9]+(?:\.[0-9]+){0,3})/i),t=null!=(t=null==t?void 0:t.version)?t:0;return e?t:parseInt(t)},r.isOBSBrowserSource=()=>r.isset(window.obsstudio),r.camelCaseToKebabCase=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),r.kebabCaseToCamelCase=e=>e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase()),r.parseTier=(e,t=!1)=>{if("prime"===e)return t?1:e;switch(e="string"==typeof e?Number(e):e){case 1e3:case 1:return 1;case 2e3:case 2:return 2;case 3e3:case 3:return 3;default:return 0}}},{}]},{},[1]);